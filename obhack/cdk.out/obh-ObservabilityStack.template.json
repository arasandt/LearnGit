{
 "Parameters": {
  "obhrolesstackinstanceParameter": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/obh/rolesstack/instance"
  },
  "obhrolesstackbucketdeploymentParameter": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/obh/rolesstack/bucket_deployment"
  },
  "obhrolesstackcustommetricsParameter": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/obh/rolesstack/custommetrics"
  },
  "SsmParameterValueawsserviceamiamazonlinuxlatestamzn2amihvmx8664gp2C96584B6F00A464EAD1953AFF4B05118Parameter": {
   "Type": "AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>",
   "Default": "/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2"
  },
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Resources": {
  "obhrolesstackbucketdeploymentssmPolicyobhObservabilityStackobhrolesstackbucketdeploymentssmB5E3F7026CCC3DDD": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::cdk-hnb659fds-assets-127537946772-us-east-1",
        "arn:aws:s3:::cdk-hnb659fds-assets-127537946772-us-east-1/*"
       ]
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "obh127537946772buildbucketEE3FBAFB",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "obh127537946772buildbucketEE3FBAFB",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "obhkey854737E4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PolicyobhObservabilityStackobhrolesstackbucketdeploymentssmB5E3F702",
    "Roles": [
     {
      "Fn::Select": [
       1,
       {
        "Fn::Split": [
         "/",
         {
          "Fn::Select": [
           5,
           {
            "Fn::Split": [
             ":",
             {
              "Ref": "obhrolesstackbucketdeploymentParameter"
             }
            ]
           }
          ]
         }
        ]
       }
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhrolesstackbucket_deploymentssm/PolicyobhObservabilityStackobhrolesstackbucketdeploymentssmB5E3F702/Resource"
   }
  },
  "obhrolesstackcustommetricsssmPolicyobhObservabilityStackobhrolesstackcustommetricsssm6EB8081D4AC9291C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PolicyobhObservabilityStackobhrolesstackcustommetricsssm6EB8081D",
    "Roles": [
     {
      "Fn::Select": [
       1,
       {
        "Fn::Split": [
         "/",
         {
          "Fn::Select": [
           5,
           {
            "Fn::Split": [
             ":",
             {
              "Ref": "obhrolesstackcustommetricsParameter"
             }
            ]
           }
          ]
         }
        ]
       }
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhrolesstackcustommetricsssm/PolicyobhObservabilityStackobhrolesstackcustommetricsssm6EB8081D/Resource"
   }
  },
  "obhkey854737E4": {
   "Type": "AWS::KMS::Key",
   "Properties": {
    "EnableKeyRotation": false,
    "KeyPolicy": {
     "Statement": [
      {
       "Action": "kms:*",
       "Effect": "Allow",
       "Principal": {
        "AWS": [
         "arn:aws:iam::127537946772:role/Superadmin",
         {
          "Ref": "obhrolesstackbucketdeploymentParameter"
         },
         {
          "Ref": "obhrolesstackinstanceParameter"
         }
        ],
        "Service": [
         "cloudtrail.amazonaws.com",
         "cloudwatch.amazonaws.com",
         "ec2.amazonaws.com",
         "events.amazonaws.com",
         "s3.amazonaws.com",
         "sns.amazonaws.com",
         "sqs.amazonaws.com"
        ]
       },
       "Resource": "*"
      },
      {
       "Action": [
        "kms:CancelKeyDeletion",
        "kms:Create*",
        "kms:Delete*",
        "kms:Describe*",
        "kms:Disable*",
        "kms:Enable*",
        "kms:Get*",
        "kms:List*",
        "kms:Put*",
        "kms:Revoke*",
        "kms:ScheduleKeyDeletion",
        "kms:TagResource",
        "kms:UntagResource",
        "kms:Update*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": "arn:aws:iam::127537946772:root"
       },
       "Resource": "*"
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Ref": "obhrolesstackbucketdeploymentParameter"
        }
       },
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PendingWindowInDays": 7,
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhkey/Resource"
   }
  },
  "obhkeyAlias6ED899F3": {
   "Type": "AWS::KMS::Alias",
   "Properties": {
    "AliasName": "alias/obh",
    "TargetKeyId": {
     "Fn::GetAtt": [
      "obhkey854737E4",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhkey/Alias/Resource"
   }
  },
  "obhnotificationtopic29134B4A": {
   "Type": "AWS::SNS::Topic",
   "Properties": {
    "KmsMasterKeyId": {
     "Fn::GetAtt": [
      "obhkey854737E4",
      "Arn"
     ]
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "TopicName": "obhnotificationtopic"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnotificationtopic/Resource"
   }
  },
  "obhnotificationtopicarasandtvirtusacom1D2CB422": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": "arasandt@virtusa.com",
    "Protocol": "email",
    "TopicArn": {
     "Ref": "obhnotificationtopic29134B4A"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnotificationtopic/arasandt@virtusa.com/Resource"
   }
  },
  "obhrumidentitypool": {
   "Type": "AWS::Cognito::IdentityPool",
   "Properties": {
    "AllowUnauthenticatedIdentities": true,
    "IdentityPoolName": "obhrumidentitypool",
    "IdentityPoolTags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhrumidentitypool"
   }
  },
  "obhrumunauthenticatedrole0081DF19": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRoleWithWebIdentity",
       "Condition": {
        "StringEquals": {
         "cognito-identity.amazonaws.com:aud": {
          "Ref": "obhrumidentitypool"
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Federated": "cognito-identity.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "IAM Role for Unauthenticated Users in Cognito Identity Pool",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AmazonCloudWatchRUMFullAccess"
       ]
      ]
     }
    ],
    "RoleName": "obhrumunauthenticatedrole",
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhrumunauthenticatedrole/Resource"
   }
  },
  "obhrumidentitypoolroleattachment": {
   "Type": "AWS::Cognito::IdentityPoolRoleAttachment",
   "Properties": {
    "IdentityPoolId": {
     "Ref": "obhrumidentitypool"
    },
    "Roles": {
     "unauthenticated": {
      "Fn::GetAtt": [
       "obhrumunauthenticatedrole0081DF19",
       "Arn"
      ]
     }
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhrumidentitypoolroleattachment"
   }
  },
  "obh127537946772buildbucketEE3FBAFB": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "obhkey854737E4",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "BucketName": "obhbuild-127537946772",
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "aws-cdk:cr-owned:nexusapp:eb4848e8",
      "Value": "true"
     },
     {
      "Key": "aws-cdk:cr-owned:nobleapp:2c94415e",
      "Value": "true"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obh-127537946772buildbucket/Resource"
   }
  },
  "obh127537946772buildbucketPolicyEB0518B5": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "obh127537946772buildbucketEE3FBAFB"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "obh127537946772buildbucketEE3FBAFB",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "obh127537946772buildbucketEE3FBAFB",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Ref": "obhrolesstackbucketdeploymentParameter"
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "obh127537946772buildbucketEE3FBAFB",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "obh127537946772buildbucketEE3FBAFB",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obh-127537946772buildbucket/Policy/Resource"
   }
  },
  "obhnexusappAwsCliLayer5F11EEEE": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "Content": {
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "12c225b94e04fc999a2a54d77987738c403683fd92a548c30fd9ef5bcae80afb.zip"
    },
    "Description": "/opt/awscli/aws"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusapp/AwsCliLayer/Resource",
    "aws:asset:path": "asset.12c225b94e04fc999a2a54d77987738c403683fd92a548c30fd9ef5bcae80afb.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "obhnexusappCustomResource2048MiB10240MiBBBF5E261": {
   "Type": "Custom::CDKBucketDeployment",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB10240MiB71038D4D",
      "Arn"
     ]
    },
    "SourceBucketNames": [
     "cdk-hnb659fds-assets-127537946772-us-east-1"
    ],
    "SourceObjectKeys": [
     "9920ab316ef115457af904c1a4a191204fbda9c85a84f560266fb10769235840.zip"
    ],
    "DestinationBucketName": {
     "Ref": "obh127537946772buildbucketEE3FBAFB"
    },
    "DestinationBucketKeyPrefix": "nexusapp",
    "Extract": false,
    "Prune": true,
    "OutputObjectKeys": true
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusapp/CustomResource-2048MiB-10240MiB/Default"
   }
  },
  "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB10240MiB71038D4D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "c6358465bf49dfae556bb430bf9c81fa578c221b82c308e3707901b1dd654762.zip"
    },
    "Environment": {
     "Variables": {
      "AWS_CA_BUNDLE": "/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"
     }
    },
    "EphemeralStorage": {
     "Size": 10240
    },
    "Handler": "index.handler",
    "Layers": [
     {
      "Ref": "obhnexusappAwsCliLayer5F11EEEE"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Ref": "obhrolesstackbucketdeploymentParameter"
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "obhrolesstackbucketdeploymentssmPolicyobhObservabilityStackobhrolesstackbucketdeploymentssmB5E3F7026CCC3DDD"
   ],
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB10240MiB/Resource",
    "aws:asset:path": "asset.c6358465bf49dfae556bb430bf9c81fa578c221b82c308e3707901b1dd654762",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "obhnobleappAwsCliLayer2E1007BE": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "Content": {
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "12c225b94e04fc999a2a54d77987738c403683fd92a548c30fd9ef5bcae80afb.zip"
    },
    "Description": "/opt/awscli/aws"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapp/AwsCliLayer/Resource",
    "aws:asset:path": "asset.12c225b94e04fc999a2a54d77987738c403683fd92a548c30fd9ef5bcae80afb.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "obhnobleappCustomResource2048MiB10240MiB6486B268": {
   "Type": "Custom::CDKBucketDeployment",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C2048MiB10240MiB71038D4D",
      "Arn"
     ]
    },
    "SourceBucketNames": [
     "cdk-hnb659fds-assets-127537946772-us-east-1"
    ],
    "SourceObjectKeys": [
     "f9f655eef7a2d9f262e7f008dc1d457c579bf545f2841716fb6b8989c29b1511.zip"
    ],
    "DestinationBucketName": {
     "Ref": "obh127537946772buildbucketEE3FBAFB"
    },
    "DestinationBucketKeyPrefix": "nobleapp",
    "Extract": false,
    "Prune": true,
    "OutputObjectKeys": true
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapp/CustomResource-2048MiB-10240MiB/Default"
   }
  },
  "obhmonitor": {
   "Type": "AWS::RUM::AppMonitor",
   "Properties": {
    "AppMonitorConfiguration": {
     "EnableXRay": true,
     "GuestRoleArn": {
      "Fn::GetAtt": [
       "obhrumunauthenticatedrole0081DF19",
       "Arn"
      ]
     },
     "IdentityPoolId": {
      "Ref": "obhrumidentitypool"
     },
     "SessionSampleRate": 1,
     "Telemetries": [
      "errors",
      "performance",
      "http"
     ]
    },
    "CwLogEnabled": true,
    "Domain": "10.104.146.218",
    "Name": "obhmonitor",
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhmonitor"
   }
  },
  "obhnexusappenvvars32A1E9D4": {
   "Type": "AWS::SSM::Parameter",
   "Properties": {
    "AllowedPattern": ".*",
    "Description": "Environment variables for nexusapp",
    "Name": "/obh/nexusapp",
    "Tags": {
     "App": "ObserveHack",
     "Module": "ObserveHack",
     "Namespace": "obh"
    },
    "Type": "String",
    "Value": {
     "Fn::Join": [
      "",
      [
       "{\"app\": \"nexusapp\", \"account_id\": \"127537946772\", \"region\": \"us-east-1\", \"rum_identity_pool_id\": \"",
       {
        "Ref": "obhrumidentitypool"
       },
       "\", \"rum_role_arn\": \"",
       {
        "Fn::GetAtt": [
         "obhrumunauthenticatedrole0081DF19",
         "Arn"
        ]
       },
       "\", \"rum_app_id\": \"",
       {
        "Fn::GetAtt": [
         "obhmonitor",
         "Id"
        ]
       },
       "\"}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusappenvvars/Resource"
   }
  },
  "obhnobleappenvvars1D54F3FC": {
   "Type": "AWS::SSM::Parameter",
   "Properties": {
    "AllowedPattern": ".*",
    "Description": "Environment variables for nobleapp",
    "Name": "/obh/nobleapp",
    "Tags": {
     "App": "ObserveHack",
     "Module": "ObserveHack",
     "Namespace": "obh"
    },
    "Type": "String",
    "Value": {
     "Fn::Join": [
      "",
      [
       "{\"app\": \"nobleapp\", \"account_id\": \"127537946772\", \"region\": \"us-east-1\", \"rum_identity_pool_id\": \"",
       {
        "Ref": "obhrumidentitypool"
       },
       "\", \"rum_role_arn\": \"",
       {
        "Fn::GetAtt": [
         "obhrumunauthenticatedrole0081DF19",
         "Arn"
        ]
       },
       "\", \"rum_app_id\": \"",
       {
        "Fn::GetAtt": [
         "obhmonitor",
         "Id"
        ]
       },
       "\"}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleappenvvars/Resource"
   }
  },
  "obhalphasgFEE41B31": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "obh-ObservabilityStack/obhalphasg",
    "GroupName": "obhalphasg",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": "10.0.0.0/8",
      "Description": "Allow HTTP for Nginx",
      "FromPort": 80,
      "IpProtocol": "tcp",
      "ToPort": 80
     },
     {
      "CidrIp": "10.0.0.0/8",
      "Description": "Allow HTTP for Tomcat",
      "FromPort": 8080,
      "IpProtocol": "tcp",
      "ToPort": 8080
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VpcId": "vpc-02509352c2f3db630"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhalphasg/Resource"
   }
  },
  "obhalphainstanceprofile": {
   "Type": "AWS::IAM::InstanceProfile",
   "Properties": {
    "Roles": [
     {
      "Fn::Select": [
       1,
       {
        "Fn::Split": [
         "/",
         {
          "Fn::Select": [
           5,
           {
            "Fn::Split": [
             ":",
             {
              "Ref": "obhrolesstackinstanceParameter"
             }
            ]
           }
          ]
         }
        ]
       }
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhalphainstanceprofile"
   }
  },
  "obhalpha": {
   "Type": "AWS::EC2::Instance",
   "Properties": {
    "BlockDeviceMappings": [
     {
      "DeviceName": "/dev/xvda",
      "Ebs": {
       "DeleteOnTermination": true,
       "Encrypted": false,
       "VolumeSize": 30,
       "VolumeType": "gp3"
      }
     }
    ],
    "IamInstanceProfile": {
     "Ref": "obhalphainstanceprofile"
    },
    "ImageId": {
     "Ref": "SsmParameterValueawsserviceamiamazonlinuxlatestamzn2amihvmx8664gp2C96584B6F00A464EAD1953AFF4B05118Parameter"
    },
    "InstanceType": "m5.large",
    "Monitoring": true,
    "NetworkInterfaces": [
     {
      "DeviceIndex": "0",
      "GroupSet": [
       {
        "Fn::GetAtt": [
         "obhalphasgFEE41B31",
         "GroupId"
        ]
       }
      ],
      "PrivateIpAddresses": [
       {
        "Primary": false,
        "PrivateIpAddress": "10.104.146.218"
       }
      ],
      "SubnetId": "subnet-035de440252ca0055"
     }
    ],
    "PropagateTagsToVolumeOnCreation": true,
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Name",
      "Value": "obhalpha"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "UserData": {
     "Fn::Base64": {
      "Fn::Join": [
       "",
       [
        "#!/bin/bash\necho \"################ Custom Init Script: Started ################\"\nyum update -y\n\n# Install Tomcat\namazon-linux-extras enable tomcat9\nyum install -y tomcat tomcat-admin-webapps tomcat-webapps jq\nsystemctl start tomcat\nsystemctl enable tomcat\nsystemctl status tomcat --no-pager\n\n\n# Install Nginx\namazon-linux-extras enable nginx1\nyum install -y nginx\nsystemctl start nginx\nsystemctl enable nginx\nsystemctl status nginx --no-pager\n\n# Install Cloudwatch Agent\nyum install -y amazon-cloudwatch-agent\n\necho '\n{\n    \"agent\": {\n        \"debug\": true\n    },\n    \"traces\": {\n        \"traces_collected\": {\n            \"application_signals\": {}\n        }\n    },\n    \"metrics\": {\n        \"namespace\": \"obh\",\n        \"aggregation_dimensions\": [\n            [\n                \"InstanceId\"\n            ]\n        ],\n        \"append_dimensions\": {\n            \"InstanceId\": \"${aws:InstanceId}\"\n        },\n        \"metrics_collected\": {\n            \"cpu\": {\n                \"measurement\": [\n                    \"cpu_usage_active\",\n                    \"cpu_usage_user\",\n                    \"cpu_usage_system\",\n                    \"cpu_usage_iowait\"\n                ],\n                \"metrics_collection_interval\": 60\n            },\n            \"disk\": {\n                \"measurement\": [\n                    \"disk_used_percent\",\n                    \"disk_free\"\n                ],\n                \"resources\": [\n                    \"*\"\n                ],\n                \"metrics_collection_interval\": 60\n            },\n            \"net\": {\n                \"measurement\": [\n                    \"bytes_sent\",\n                    \"bytes_recv\",\n                    \"packets_sent\",\n                    \"packets_recv\",\n                    \"err_in\",\n                    \"err_out\"\n                ],\n                \"resources\": [\n                    \"*\"\n                ],\n                \"metrics_collection_interval\": 60\n            },\n            \"swap\": {\n                \"measurement\": [\n                    \"swap_used\",\n                    \"swap_free\"\n                ]\n            },\n            \"procstat\": {\n                \"measurement\": [\n                    \"proc_total\",\n                    \"proc_running\"\n                ],\n                \"metrics_collection_interval\": 60\n            },\n            \"mem\": {\n                \"measurement\": [\n                    \"mem_used_percent\",\n                    \"mem_available\",\n                    \"mem_cached\"\n                ],\n                \"metrics_collection_interval\": 60\n            }\n        }\n    },\n    \"logs\": {\n        \"metrics_collected\": {\n            \"application_signals\": {}\n        },\n        \"logs_collected\": {\n            \"files\": {\n                \"collect_list\": [\n                    {\n                        \"file_path\": \"/var/log/tomcat/localhost_access_log*.txt\",\n                        \"log_group_name\": \"obh-tomcat-access-logs\",\n                        \"log_stream_name\": \"{instance_id}-access\",\n                        \"timestamp_format\": \"%d/%b/%Y:%H:%M:%S %z\"\n                    },\n                    {\n                        \"file_path\": \"/var/log/tomcat/catalina*.log\",\n                        \"log_group_name\": \"obh-tomcat-error-logs\",\n                        \"log_stream_name\": \"{instance_id}-catalina\",\n                        \"timestamp_format\": \"%Y-%m-%d %H:%M:%S,%f\"\n                    },\n                    {\n                        \"file_path\": \"/var/log/nginx/access.log\",\n                        \"log_group_name\": \"obh-nginx-access-logs\",\n                        \"log_stream_name\": \"{instance_id}-nginx-access\",\n                        \"timestamp_format\": \"%d/%b/%Y:%H:%M:%S %z\"\n                    },\n                    {\n                        \"file_path\": \"/var/log/nginx/error.log\",\n                        \"log_group_name\": \"obh-nginx-error-logs\",\n                        \"log_stream_name\": \"{instance_id}-nginx-error\",\n                        \"timestamp_format\": \"%Y/%m/%d %H:%M:%S\"\n                    }\n                ]\n            }\n        }\n    }\n}\n' > /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json\n\nsystemctl start amazon-cloudwatch-agent\nsystemctl enable amazon-cloudwatch-agent\nsystemctl status amazon-cloudwatch-agent --no-pager\n\n# Install X-Ray Daemon\n# curl https://s3.us-east-2.amazonaws.com/aws-xray-assets.us-east-2/xray-daemon/aws-xray-daemon-3.x.rpm -o /home/ec2-user/xray.rpm\n# yum install -y /home/ec2-user/xray.rpm\n# systemctl enable xray.service\n# systemctl start xray.service\n# systemctl status xray.service --no-pager\n\n# Install Python 3.8\nyum install -y python3-pip python3-dev python3-venv \nyum remove python3 \namazon-linux-extras install python3.8\nrpm -ql python38\nln -sf /usr/bin/python3.8 /usr/bin/python3\nln -sf /usr/bin/pydoc3.8 /usr/bin/pydoc\npython3 --version\n\n# Run ADOT Collector\ncd ~\nwget -nv https://aws-otel-collector.s3.amazonaws.com/amazon_linux/amd64/latest/aws-otel-collector.rpm\nrpm -Uvh  ./aws-otel-collector.rpm\n/opt/aws/aws-otel-collector/bin/aws-otel-collector-ctl -a start\nsystemctl status aws-otel-collector \n\n\n# Install MySQL\namazon-linux-extras install epel -y\nyum install -y https://dev.mysql.com/get/mysql80-community-release-el7-5.noarch.rpm\nrpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2023\nyum install -y mysql-community-server \nsystemctl enable mysqld \nsystemctl start mysqld \nsystemctl status mysqld --no-pager\ntemp_password=$(sudo grep 'temporary password' /var/log/mysqld.log | awk '{print $NF}')\nnew_password=A+a8th+++ms\nmysql --connect-expired-password -u root -p$temp_password  -e \"ALTER USER 'root'@'localhost' IDENTIFIED BY '$new_password';\"\nmysql -u root -p$new_password -e \"CREATE DATABASE test;\"\nmysql -u root -p$new_password -e \"SHOW DATABASES;\"\n\n\n# Download App\ncd ~\nAPPS=(\"nexusapp\" \"nobleapp\")\nNAMESPACE=obh\nREGION=us-east-1\n\n# Update the default page\ncat <<EOF > /usr/share/nginx/html/index.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Applications</title>\n</head>\n<body>\n    <h1>Links</h1>\nEOF\nfor app in \"${APPS[@]}\"; do\n    echo \"<a id=\\\"$app\\\" href=\\\"/$app\\\">$app</a><br>\" >> /usr/share/nginx/html/index.html\ndone\ncat <<EOF >> /usr/share/nginx/html/index.html\n</body>\n</html>\nEOF\n\ncat <<EOF > /etc/nginx/conf.d/$NAMESPACE.conf\nserver {\n    listen 80;\n    server_name $NAMESPACE.com;  \n}\nEOF\n\n# Download all apps\naws s3 cp --recursive s3://",
        {
         "Ref": "obh127537946772buildbucketEE3FBAFB"
        },
        "/ .\n\nexport MYSQL_PASSWORD=$new_password\n\nfor script in \"${APPS[@]}\"; do  \n    echo \"################ Deploying ($script) ################\"\n    cd $script\n    unzip *.zip\n    # Add logs to CW\n    sed -i \"s/#namespace#/$NAMESPACE/g\" logging.json    \n    jq -s '.[0].logs.logs_collected.files.collect_list += .[1].logs.logs_collected.files.collect_list | .[0]' /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json logging.json > temp.json && mv temp.json /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json\n\n    # Deploy app\n    bash +x deploy.sh $NAMESPACE $REGION\n\n    # Replace the last line with each apps nginx conf\n    echo \"$(head -n -1 /etc/nginx/conf.d/$NAMESPACE.conf)\n    $(cat nginx.conf)\"$'\\n}' > /etc/nginx/conf.d/$NAMESPACE.conf\n    cd ..\ndone\n\nsystemctl restart amazon-cloudwatch-agent\nsystemctl restart nginx\n\necho \"################ Custom Init Script: Complete ################\""
       ]
      ]
     }
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhalpha"
   }
  },
  "obhnexusapphbArtifactsBucket398CB368": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusapphb/ArtifactsBucket/Resource"
   }
  },
  "obhnexusapphbArtifactsBucketPolicy48A28EB1": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "obhnexusapphbArtifactsBucket398CB368"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "obhnexusapphbArtifactsBucket398CB368",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "obhnexusapphbArtifactsBucket398CB368",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusapphb/ArtifactsBucket/Policy/Resource"
   }
  },
  "obhnexusapphbServiceRoleAEA49C57": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "s3:ListAllMyBuckets",
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": "s3:GetBucketLocation",
         "Effect": "Allow",
         "Resource": {
          "Fn::GetAtt": [
           "obhnexusapphbArtifactsBucket398CB368",
           "Arn"
          ]
         }
        },
        {
         "Action": "s3:PutObject",
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            {
             "Fn::GetAtt": [
              "obhnexusapphbArtifactsBucket398CB368",
              "Arn"
             ]
            },
            "/*"
           ]
          ]
         }
        },
        {
         "Action": "cloudwatch:PutMetricData",
         "Condition": {
          "StringEquals": {
           "cloudwatch:namespace": "CloudWatchSynthetics"
          }
         },
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
         ],
         "Effect": "Allow",
         "Resource": "arn:aws:logs:us-east-1:127537946772:log-group:/aws/lambda/cwsyn-*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "canaryPolicy"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusapphb/ServiceRole/Resource"
   }
  },
  "obhnexusapphbSecurityGroup371B9C10": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Canary obhObservabilityStackobhnexusapphb2BB0D403",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VpcId": "vpc-02509352c2f3db630"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusapphb/SecurityGroup/Resource"
   }
  },
  "obhnexusapphbCF8758AA": {
   "Type": "AWS::Synthetics::Canary",
   "Properties": {
    "ArtifactS3Location": {
     "Fn::Join": [
      "",
      [
       "s3://",
       {
        "Ref": "obhnexusapphbArtifactsBucket398CB368"
       }
      ]
     ]
    },
    "Code": {
     "Handler": "index.handler",
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "5a95aa835b4b60d8d336fa33422c865afe761c92db8019eb5bd5f74a88991219.zip"
    },
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "obhnexusapphbServiceRoleAEA49C57",
      "Arn"
     ]
    },
    "Name": "obhnexusapphb",
    "ProvisionedResourceCleanup": "AUTOMATIC",
    "RunConfig": {
     "EnvironmentVariables": {
      "URL": "http://10.104.146.218/nexusapp",
      "CANARY_TYPE": "HEARTBEAT"
     },
     "MemoryInMB": 1024
    },
    "RuntimeVersion": "syn-python-selenium-3.0",
    "Schedule": {
     "DurationInSeconds": "0",
     "Expression": "rate(5 minutes)"
    },
    "StartCanaryAfterCreation": true,
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VPCConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "obhnexusapphbSecurityGroup371B9C10",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-035de440252ca0055",
      "subnet-01091b8aa2c63829e",
      "subnet-0146626e0e92bdc4c",
      "subnet-04766487e21faba3e"
     ],
     "VpcId": "vpc-02509352c2f3db630"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusapphb/Resource"
   }
  },
  "obhnexusappapiArtifactsBucket213AA282": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusappapi/ArtifactsBucket/Resource"
   }
  },
  "obhnexusappapiArtifactsBucketPolicy6BFE8693": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "obhnexusappapiArtifactsBucket213AA282"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "obhnexusappapiArtifactsBucket213AA282",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "obhnexusappapiArtifactsBucket213AA282",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusappapi/ArtifactsBucket/Policy/Resource"
   }
  },
  "obhnexusappapiServiceRole856842E4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "s3:ListAllMyBuckets",
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": "s3:GetBucketLocation",
         "Effect": "Allow",
         "Resource": {
          "Fn::GetAtt": [
           "obhnexusappapiArtifactsBucket213AA282",
           "Arn"
          ]
         }
        },
        {
         "Action": "s3:PutObject",
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            {
             "Fn::GetAtt": [
              "obhnexusappapiArtifactsBucket213AA282",
              "Arn"
             ]
            },
            "/*"
           ]
          ]
         }
        },
        {
         "Action": "cloudwatch:PutMetricData",
         "Condition": {
          "StringEquals": {
           "cloudwatch:namespace": "CloudWatchSynthetics"
          }
         },
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
         ],
         "Effect": "Allow",
         "Resource": "arn:aws:logs:us-east-1:127537946772:log-group:/aws/lambda/cwsyn-*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "canaryPolicy"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusappapi/ServiceRole/Resource"
   }
  },
  "obhnexusappapiSecurityGroup4C4F320E": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Canary obhObservabilityStackobhnexusappapiF66BCB32",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VpcId": "vpc-02509352c2f3db630"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusappapi/SecurityGroup/Resource"
   }
  },
  "obhnexusappapi846F1E79": {
   "Type": "AWS::Synthetics::Canary",
   "Properties": {
    "ArtifactS3Location": {
     "Fn::Join": [
      "",
      [
       "s3://",
       {
        "Ref": "obhnexusappapiArtifactsBucket213AA282"
       }
      ]
     ]
    },
    "Code": {
     "Handler": "index.handler",
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "5a95aa835b4b60d8d336fa33422c865afe761c92db8019eb5bd5f74a88991219.zip"
    },
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "obhnexusappapiServiceRole856842E4",
      "Arn"
     ]
    },
    "Name": "obhnexusappapi",
    "RunConfig": {
     "EnvironmentVariables": {
      "URL": "http://10.104.146.218/nexusapp/health",
      "CANARY_TYPE": "API"
     },
     "MemoryInMB": 1024
    },
    "RuntimeVersion": "syn-python-selenium-3.0",
    "Schedule": {
     "DurationInSeconds": "0",
     "Expression": "rate(5 minutes)"
    },
    "StartCanaryAfterCreation": true,
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VPCConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "obhnexusappapiSecurityGroup4C4F320E",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-035de440252ca0055",
      "subnet-01091b8aa2c63829e",
      "subnet-0146626e0e92bdc4c",
      "subnet-04766487e21faba3e"
     ],
     "VpcId": "vpc-02509352c2f3db630"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusappapi/Resource"
   }
  },
  "obhnobleapphbArtifactsBucket100834A6": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapphb/ArtifactsBucket/Resource"
   }
  },
  "obhnobleapphbArtifactsBucketPolicyCEEC16FD": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "obhnobleapphbArtifactsBucket100834A6"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "obhnobleapphbArtifactsBucket100834A6",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "obhnobleapphbArtifactsBucket100834A6",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapphb/ArtifactsBucket/Policy/Resource"
   }
  },
  "obhnobleapphbServiceRole83BB099F": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "s3:ListAllMyBuckets",
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": "s3:GetBucketLocation",
         "Effect": "Allow",
         "Resource": {
          "Fn::GetAtt": [
           "obhnobleapphbArtifactsBucket100834A6",
           "Arn"
          ]
         }
        },
        {
         "Action": "s3:PutObject",
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            {
             "Fn::GetAtt": [
              "obhnobleapphbArtifactsBucket100834A6",
              "Arn"
             ]
            },
            "/*"
           ]
          ]
         }
        },
        {
         "Action": "cloudwatch:PutMetricData",
         "Condition": {
          "StringEquals": {
           "cloudwatch:namespace": "CloudWatchSynthetics"
          }
         },
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
         ],
         "Effect": "Allow",
         "Resource": "arn:aws:logs:us-east-1:127537946772:log-group:/aws/lambda/cwsyn-*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "canaryPolicy"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapphb/ServiceRole/Resource"
   }
  },
  "obhnobleapphbSecurityGroup38FFC1A4": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Canary obhObservabilityStackobhnobleapphb27E246A3",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VpcId": "vpc-02509352c2f3db630"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapphb/SecurityGroup/Resource"
   }
  },
  "obhnobleapphbF5B12AD0": {
   "Type": "AWS::Synthetics::Canary",
   "Properties": {
    "ArtifactS3Location": {
     "Fn::Join": [
      "",
      [
       "s3://",
       {
        "Ref": "obhnobleapphbArtifactsBucket100834A6"
       }
      ]
     ]
    },
    "Code": {
     "Handler": "index.handler",
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "5a95aa835b4b60d8d336fa33422c865afe761c92db8019eb5bd5f74a88991219.zip"
    },
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "obhnobleapphbServiceRole83BB099F",
      "Arn"
     ]
    },
    "Name": "obhnobleapphb",
    "ProvisionedResourceCleanup": "AUTOMATIC",
    "RunConfig": {
     "EnvironmentVariables": {
      "URL": "http://10.104.146.218/nobleapp",
      "CANARY_TYPE": "HEARTBEAT"
     },
     "MemoryInMB": 1024
    },
    "RuntimeVersion": "syn-python-selenium-3.0",
    "Schedule": {
     "DurationInSeconds": "0",
     "Expression": "rate(5 minutes)"
    },
    "StartCanaryAfterCreation": true,
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VPCConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "obhnobleapphbSecurityGroup38FFC1A4",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-035de440252ca0055",
      "subnet-01091b8aa2c63829e",
      "subnet-0146626e0e92bdc4c",
      "subnet-04766487e21faba3e"
     ],
     "VpcId": "vpc-02509352c2f3db630"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapphb/Resource"
   }
  },
  "obhnobleappapiArtifactsBucket28EDD507": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleappapi/ArtifactsBucket/Resource"
   }
  },
  "obhnobleappapiArtifactsBucketPolicy5E75BBDA": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "obhnobleappapiArtifactsBucket28EDD507"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "obhnobleappapiArtifactsBucket28EDD507",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "obhnobleappapiArtifactsBucket28EDD507",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleappapi/ArtifactsBucket/Policy/Resource"
   }
  },
  "obhnobleappapiServiceRoleC4A029FF": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "s3:ListAllMyBuckets",
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": "s3:GetBucketLocation",
         "Effect": "Allow",
         "Resource": {
          "Fn::GetAtt": [
           "obhnobleappapiArtifactsBucket28EDD507",
           "Arn"
          ]
         }
        },
        {
         "Action": "s3:PutObject",
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            {
             "Fn::GetAtt": [
              "obhnobleappapiArtifactsBucket28EDD507",
              "Arn"
             ]
            },
            "/*"
           ]
          ]
         }
        },
        {
         "Action": "cloudwatch:PutMetricData",
         "Condition": {
          "StringEquals": {
           "cloudwatch:namespace": "CloudWatchSynthetics"
          }
         },
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
         ],
         "Effect": "Allow",
         "Resource": "arn:aws:logs:us-east-1:127537946772:log-group:/aws/lambda/cwsyn-*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "canaryPolicy"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleappapi/ServiceRole/Resource"
   }
  },
  "obhnobleappapiSecurityGroup70837C50": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Canary obhObservabilityStackobhnobleappapi8A43FDDD",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VpcId": "vpc-02509352c2f3db630"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleappapi/SecurityGroup/Resource"
   }
  },
  "obhnobleappapi6E3C6539": {
   "Type": "AWS::Synthetics::Canary",
   "Properties": {
    "ArtifactS3Location": {
     "Fn::Join": [
      "",
      [
       "s3://",
       {
        "Ref": "obhnobleappapiArtifactsBucket28EDD507"
       }
      ]
     ]
    },
    "Code": {
     "Handler": "index.handler",
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "5a95aa835b4b60d8d336fa33422c865afe761c92db8019eb5bd5f74a88991219.zip"
    },
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "obhnobleappapiServiceRoleC4A029FF",
      "Arn"
     ]
    },
    "Name": "obhnobleappapi",
    "RunConfig": {
     "EnvironmentVariables": {
      "URL": "http://10.104.146.218/nobleapp/health",
      "CANARY_TYPE": "API"
     },
     "MemoryInMB": 1024
    },
    "RuntimeVersion": "syn-python-selenium-3.0",
    "Schedule": {
     "DurationInSeconds": "0",
     "Expression": "rate(5 minutes)"
    },
    "StartCanaryAfterCreation": true,
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VPCConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "obhnobleappapiSecurityGroup70837C50",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-035de440252ca0055",
      "subnet-01091b8aa2c63829e",
      "subnet-0146626e0e92bdc4c",
      "subnet-04766487e21faba3e"
     ],
     "VpcId": "vpc-02509352c2f3db630"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleappapi/Resource"
   }
  },
  "obhworkflowArtifactsBucket3E8D629D": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhworkflow/ArtifactsBucket/Resource"
   }
  },
  "obhworkflowArtifactsBucketPolicy45C89629": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "obhworkflowArtifactsBucket3E8D629D"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "obhworkflowArtifactsBucket3E8D629D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "obhworkflowArtifactsBucket3E8D629D",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhworkflow/ArtifactsBucket/Policy/Resource"
   }
  },
  "obhworkflowServiceRoleA0FC5196": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "s3:ListAllMyBuckets",
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": "s3:GetBucketLocation",
         "Effect": "Allow",
         "Resource": {
          "Fn::GetAtt": [
           "obhworkflowArtifactsBucket3E8D629D",
           "Arn"
          ]
         }
        },
        {
         "Action": "s3:PutObject",
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            {
             "Fn::GetAtt": [
              "obhworkflowArtifactsBucket3E8D629D",
              "Arn"
             ]
            },
            "/*"
           ]
          ]
         }
        },
        {
         "Action": "cloudwatch:PutMetricData",
         "Condition": {
          "StringEquals": {
           "cloudwatch:namespace": "CloudWatchSynthetics"
          }
         },
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
         ],
         "Effect": "Allow",
         "Resource": "arn:aws:logs:us-east-1:127537946772:log-group:/aws/lambda/cwsyn-*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "canaryPolicy"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhworkflow/ServiceRole/Resource"
   }
  },
  "obhworkflowSecurityGroup23351951": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Canary obhObservabilityStackobhworkflowD4E81BCC",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VpcId": "vpc-02509352c2f3db630"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhworkflow/SecurityGroup/Resource"
   }
  },
  "obhworkflow5A0E04B5": {
   "Type": "AWS::Synthetics::Canary",
   "Properties": {
    "ArtifactS3Location": {
     "Fn::Join": [
      "",
      [
       "s3://",
       {
        "Ref": "obhworkflowArtifactsBucket3E8D629D"
       }
      ]
     ]
    },
    "Code": {
     "Handler": "index.handler",
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "5a95aa835b4b60d8d336fa33422c865afe761c92db8019eb5bd5f74a88991219.zip"
    },
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "obhworkflowServiceRoleA0FC5196",
      "Arn"
     ]
    },
    "Name": "obhworkflow",
    "RunConfig": {
     "EnvironmentVariables": {
      "URL": "http://10.104.146.218/",
      "CANARY_TYPE": "WORKFLOW",
      "NAVIGATION_APP": "nobleapp"
     },
     "MemoryInMB": 1024
    },
    "RuntimeVersion": "syn-nodejs-puppeteer-8.0",
    "Schedule": {
     "DurationInSeconds": "0",
     "Expression": "rate(5 minutes)"
    },
    "StartCanaryAfterCreation": true,
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "VPCConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "obhworkflowSecurityGroup23351951",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-035de440252ca0055",
      "subnet-01091b8aa2c63829e",
      "subnet-0146626e0e92bdc4c",
      "subnet-04766487e21faba3e"
     ],
     "VpcId": "vpc-02509352c2f3db630"
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhworkflow/Resource"
   }
  },
  "obhnobleapplatencyslo": {
   "Type": "AWS::ApplicationSignals::ServiceLevelObjective",
   "Properties": {
    "BurnRateConfigurations": [
     {
      "LookBackWindowMinutes": 60
     }
    ],
    "Goal": {
     "AttainmentGoal": 95,
     "Interval": {
      "RollingInterval": {
       "Duration": 1,
       "DurationUnit": "DAY"
      }
     },
     "WarningThreshold": 90
    },
    "Name": "obhnobleapplatencyslo",
    "Sli": {
     "ComparisonOperator": "LessThan",
     "MetricThreshold": 1,
     "SliMetric": {
      "KeyAttributes": {
       "Environment": "ec2:default",
       "Name": "nobleapp",
       "Type": "Service"
      },
      "MetricType": "LATENCY",
      "OperationName": "GET /",
      "PeriodSeconds": 60,
      "Statistic": "p95"
     }
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapplatencyslo"
   }
  },
  "obhnobleappavailabilityslo": {
   "Type": "AWS::ApplicationSignals::ServiceLevelObjective",
   "Properties": {
    "Goal": {
     "AttainmentGoal": 99.9,
     "Interval": {
      "RollingInterval": {
       "Duration": 7,
       "DurationUnit": "DAY"
      }
     },
     "WarningThreshold": 99
    },
    "Name": "obhnobleappavailabilityslo",
    "Sli": {
     "ComparisonOperator": "GreaterThanOrEqualTo",
     "MetricThreshold": 99.9,
     "SliMetric": {
      "KeyAttributes": {
       "Environment": "ec2:default",
       "Name": "nobleapp",
       "Type": "Service"
      },
      "MetricType": "AVAILABILITY",
      "OperationName": "GET /health",
      "PeriodSeconds": 60
     }
    },
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleappavailabilityslo"
   }
  },
  "obhdashboardE3423DFA": {
   "Type": "AWS::CloudWatch::Dashboard",
   "Properties": {
    "DashboardBody": {
     "Fn::Join": [
      "",
      [
       "{\"start\":\"-PT1D\",\"periodOverride\":\"auto\",\"widgets\":[{\"type\":\"metric\",\"width\":4,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"pie\",\"title\":\"Instance Health\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[{\"label\":\"RUNNING\",\"color\":\"#2ca02c\",\"expression\":\"IF(FILL(m1,0) > 0, 1, 0)\",\"period\":120}],[\"AWS/EC2\",\"CPUUtilization\",\"InstanceId\",\"",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\",{\"period\":120,\"stat\":\"Maximum\",\"visible\":false,\"id\":\"m1\"}],[{\"label\":\"STOPPED\",\"color\":\"#d62728\",\"expression\":\"IF(FILL(m1,0) == 0, 1, 0)\",\"period\":120}]],\"yAxis\":{},\"legend\":{\"position\":\"bottom\"},\"setPeriodToTimeRange\":false,\"period\":60}},{\"type\":\"metric\",\"width\":3,\"height\":3,\"x\":4,\"y\":0,\"properties\":{\"view\":\"singleValue\",\"title\":\"Services\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[{\"label\":\"Count\",\"expression\":\"IF(FILL(m1,0) > 0, 1, 0)+IF(FILL(m2,0) > 0, 1, 0)\",\"period\":60}],[\"AWS/X-Ray\",\"ResponseTime\",\"GroupName\",\"Default\",\"ServiceName\",\"nexusapp\",\"ServiceType\",\"NONE\",{\"period\":60,\"stat\":\"SampleCount\",\"visible\":false,\"id\":\"m1\"}],[\"AWS/X-Ray\",\"ResponseTime\",\"Environment\",\"ec2:default\",\"GroupName\",\"Default\",\"ServiceName\",\"nobleapp\",\"ServiceType\",\"AWS::EC2::Instance\",{\"period\":60,\"stat\":\"SampleCount\",\"visible\":false,\"id\":\"m2\"}]],\"setPeriodToTimeRange\":true}},{\"type\":\"metric\",\"width\":3,\"height\":3,\"x\":4,\"y\":3,\"properties\":{\"view\":\"singleValue\",\"title\":\"Disk (Total)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[{\"label\":\"ThroughPut\",\"expression\":\"m1 + m2\"}],[\"AWS/EC2\",\"EBSReadBytes\",\"InstanceId\",\"",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\",{\"label\":\"EBSRead\",\"stat\":\"Sum\",\"visible\":false,\"id\":\"m1\"}],[\"AWS/EC2\",\"EBSWriteBytes\",\"InstanceId\",\"",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\",{\"label\":\"EBSWrite\",\"stat\":\"Sum\",\"visible\":false,\"id\":\"m2\"}]],\"setPeriodToTimeRange\":true}},{\"type\":\"metric\",\"width\":17,\"height\":3,\"x\":7,\"y\":0,\"properties\":{\"view\":\"singleValue\",\"title\":\"Instance Metrics (Average)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"obh\",\"disk_used_percent\",\"InstanceId\",\"",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\",{\"label\":\"Disk Used (%)\"}],[\"obh\",\"mem_used_percent\",\"InstanceId\",\"",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\",{\"label\":\"Memory Used (%)\"}],[\"obh\",\"cpu_usage_active\",\"InstanceId\",\"",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\",{\"label\":\"CPU Used (%)\"}]],\"setPeriodToTimeRange\":true}},{\"type\":\"metric\",\"width\":17,\"height\":3,\"x\":7,\"y\":3,\"properties\":{\"view\":\"singleValue\",\"title\":\"Instance Metrics (Average)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/EC2\",\"NetworkIn\",\"InstanceId\",\"",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\",{\"label\":\"Network In\"}],[\"AWS/EC2\",\"NetworkOut\",\"InstanceId\",\"",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\",{\"label\":\"Network Out\"}]],\"setPeriodToTimeRange\":true}},{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":6,\"properties\":{\"markdown\":\"---\",\"background\":\"transparent\"}},{\"type\":\"text\",\"width\":4,\"height\":4,\"x\":0,\"y\":7,\"properties\":{\"markdown\":\"# **nexusapp**\\n* **InstanceId:** ",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\\n* **AZ:** ",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "AvailabilityZone"
        ]
       },
       " \\n* **IP:** ",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "PrivateIp"
        ]
       },
       "\\n* **URL:** [Click here](http://10.104.146.218nexusapp)\\n\",\"background\":\"transparent\"}},{\"type\":\"metric\",\"width\":4,\"height\":4,\"x\":0,\"y\":11,\"properties\":{\"view\":\"pie\",\"title\":\"Service Status\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[{\"label\":\"Service Down\",\"color\":\"#d62728\",\"expression\":\"IF(FILL(m1,0) == 0, 1, 0)\"}],[\"CloudWatchSynthetics\",\"SuccessPercent\",\"CanaryName\",\"obhnexusappapi\",{\"stat\":\"Maximum\",\"visible\":false,\"id\":\"m1\"}],[{\"label\":\"Service Up\",\"color\":\"#2ca02c\",\"expression\":\"IF(FILL(m1,0) > 0, 1, 0)\"}]],\"yAxis\":{},\"legend\":{\"position\":\"hidden\"},\"setPeriodToTimeRange\":false,\"period\":300}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":4,\"y\":7,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Placeholder\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[{\"label\":\"Availability\",\"expression\":\"(volume - fault) * 100 / volume\"}],[\"AWS/X-Ray\",\"TracedRequestCount\",\"GroupName\",\"Default\",\"ServiceName\",\"nexusapp\",\"ServiceType\",\"NONE\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"volume\"}],[\"AWS/X-Ray\",\"FaultRate\",\"GroupName\",\"Default\",\"ServiceName\",\"nexusapp\",\"ServiceType\",\"NONE\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"fault\"}]],\"yAxis\":{\"left\":{\"min\":0}},\"liveData\":false}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":4,\"y\":11,\"properties\":{\"view\":\"singleValue\",\"title\":\"Requests < 300ms\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[{\"label\":\"Percentage\",\"expression\":\"m1 * 100\"}],[\"nexusapp_CustomMetrics\",\"PercentageRequestsBelow300ms\",\"Derived\",\"PercentageRequestsBelow300ms\",{\"visible\":false,\"id\":\"m1\"}]],\"setPeriodToTimeRange\":true}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":9,\"y\":7,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Trial vs Subscribed Users\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[\"nexusapp_CustomMetrics\",\"usercount\",\"Annotation\",\"trial\",{\"stat\":\"Sum\"}],[\"nexusapp_CustomMetrics\",\"usercount\",\"Annotation\",\"subscriber\",{\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}},\"legend\":{\"position\":\"right\"},\"liveData\":false}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":9,\"y\":11,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Availability\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[{\"label\":\"Availability\",\"expression\":\"(volume - fault) * 100 / volume\"}],[\"AWS/X-Ray\",\"TracedRequestCount\",\"GroupName\",\"Default\",\"ServiceName\",\"nexusapp\",\"ServiceType\",\"NONE\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"volume\"}],[\"AWS/X-Ray\",\"FaultRate\",\"GroupName\",\"Default\",\"ServiceName\",\"nexusapp\",\"ServiceType\",\"NONE\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"fault\"}]],\"yAxis\":{\"left\":{\"min\":0}},\"liveData\":false}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":14,\"y\":7,\"properties\":{\"view\":\"timeSeries\",\"title\":\"SLO attainment Availability\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[\"AWS/ApplicationSignals\",\"AttainmentRate\",\"SloName\",\"obhnexusappavailabilityslo\"]],\"yAxis\":{\"left\":{\"label\":\"%\",\"max\":100,\"showUnits\":false}},\"liveData\":false,\"period\":3600}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":14,\"y\":11,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Requests and Faults (5xx)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[\"AWS/X-Ray\",\"TracedRequestCount\",\"GroupName\",\"Default\",\"ServiceName\",\"nexusapp\",\"ServiceType\",\"NONE\",{\"stat\":\"Sum\"}],[{\"label\":\"Faults\",\"color\":\"#d62728\",\"expression\":\"FILL(m1, 0)\"}],[\"AWS/X-Ray\",\"FaultRate\",\"GroupName\",\"Default\",\"ServiceName\",\"nexusapp\",\"ServiceType\",\"NONE\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"m1\"}]],\"yAxis\":{\"left\":{\"min\":0}},\"liveData\":false}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":19,\"y\":7,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Trial Users Anomaly\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"nexusapp_CustomMetrics\",\"usercount\",\"Annotation\",\"trial\",{\"stat\":\"p90\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":19,\"y\":11,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Latency\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[\"AWS/X-Ray\",\"ResponseTime\",\"GroupName\",\"Default\",\"ServiceName\",\"nexusapp\",\"ServiceType\",\"NONE\"]],\"yAxis\":{\"left\":{\"label\":\"Seconds\",\"min\":0}},\"liveData\":false}},{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":15,\"properties\":{\"markdown\":\"---\",\"background\":\"transparent\"}},{\"type\":\"text\",\"width\":4,\"height\":4,\"x\":0,\"y\":16,\"properties\":{\"markdown\":\"# **nobleapp**\\n* **InstanceId:** ",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "InstanceId"
        ]
       },
       "\\n* **AZ:** ",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "AvailabilityZone"
        ]
       },
       " \\n* **IP:** ",
       {
        "Fn::GetAtt": [
         "obhalpha",
         "PrivateIp"
        ]
       },
       "\\n* **URL:** [Click here](http://10.104.146.218nobleapp)\\n\",\"background\":\"transparent\"}},{\"type\":\"metric\",\"width\":4,\"height\":4,\"x\":0,\"y\":20,\"properties\":{\"view\":\"pie\",\"title\":\"Service Status\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[{\"label\":\"Service Down\",\"color\":\"#d62728\",\"expression\":\"IF(FILL(m1,0) == 0, 1, 0)\"}],[\"CloudWatchSynthetics\",\"SuccessPercent\",\"CanaryName\",\"obhnobleappapi\",{\"stat\":\"Maximum\",\"visible\":false,\"id\":\"m1\"}],[{\"label\":\"Service Up\",\"color\":\"#2ca02c\",\"expression\":\"IF(FILL(m1,0) > 0, 1, 0)\"}]],\"yAxis\":{},\"legend\":{\"position\":\"hidden\"},\"setPeriodToTimeRange\":false,\"period\":300}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":4,\"y\":16,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Placeholder\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[{\"label\":\"Availability\",\"expression\":\"(volume - fault) * 100 / volume\"}],[\"AWS/X-Ray\",\"TracedRequestCount\",\"Environment\",\"ec2:default\",\"GroupName\",\"Default\",\"ServiceName\",\"nobleapp\",\"ServiceType\",\"AWS::EC2::Instance\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"volume\"}],[\"ApplicationSignals\",\"Fault\",\"Environment\",\"ec2:default\",\"Service\",\"nobleapp\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"fault\"}]],\"yAxis\":{\"left\":{\"min\":0}},\"liveData\":false}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":4,\"y\":20,\"properties\":{\"view\":\"singleValue\",\"title\":\"Requests < 300ms\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[{\"label\":\"Percentage\",\"expression\":\"m1 * 100\"}],[\"nobleapp_CustomMetrics\",\"PercentageRequestsBelow300ms\",\"Derived\",\"PercentageRequestsBelow300ms\",{\"visible\":false,\"id\":\"m1\"}]],\"setPeriodToTimeRange\":true}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":9,\"y\":16,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Trial vs Subscribed Users\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[\"nobleapp_CustomMetrics\",\"usercount\",\"Annotation\",\"trial\",{\"stat\":\"Sum\"}],[\"nobleapp_CustomMetrics\",\"usercount\",\"Annotation\",\"subscriber\",{\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}},\"legend\":{\"position\":\"right\"},\"liveData\":false}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":9,\"y\":20,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Availability\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[{\"label\":\"Availability\",\"expression\":\"(volume - fault) * 100 / volume\"}],[\"AWS/X-Ray\",\"TracedRequestCount\",\"Environment\",\"ec2:default\",\"GroupName\",\"Default\",\"ServiceName\",\"nobleapp\",\"ServiceType\",\"AWS::EC2::Instance\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"volume\"}],[\"ApplicationSignals\",\"Fault\",\"Environment\",\"ec2:default\",\"Service\",\"nobleapp\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"fault\"}]],\"yAxis\":{\"left\":{\"min\":0}},\"liveData\":false}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":14,\"y\":16,\"properties\":{\"view\":\"timeSeries\",\"title\":\"SLO attainment Availability\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[\"AWS/ApplicationSignals\",\"AttainmentRate\",\"SloName\",\"obhnobleappavailabilityslo\"]],\"yAxis\":{\"left\":{\"label\":\"%\",\"max\":100,\"showUnits\":false}},\"liveData\":false,\"period\":3600}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":14,\"y\":20,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Requests and Faults (5xx)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[\"AWS/X-Ray\",\"TracedRequestCount\",\"Environment\",\"ec2:default\",\"GroupName\",\"Default\",\"ServiceName\",\"nobleapp\",\"ServiceType\",\"AWS::EC2::Instance\",{\"stat\":\"Sum\"}],[{\"label\":\"Faults\",\"color\":\"#d62728\",\"expression\":\"FILL(m1, 0)\"}],[\"ApplicationSignals\",\"Fault\",\"Environment\",\"ec2:default\",\"Service\",\"nobleapp\",{\"stat\":\"Sum\",\"visible\":false,\"id\":\"m1\"}]],\"yAxis\":{\"left\":{\"min\":0}},\"liveData\":false}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":19,\"y\":16,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Trial Users Anomaly\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"nobleapp_CustomMetrics\",\"usercount\",\"Annotation\",\"trial\",{\"stat\":\"p90\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":5,\"height\":4,\"x\":19,\"y\":20,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Latency\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"stacked\":false,\"metrics\":[[{\"label\":\"Latency\",\"expression\":\"m1 / 1000\"}],[\"ApplicationSignals\",\"Latency\",\"Environment\",\"ec2:default\",\"Service\",\"nobleapp\",{\"visible\":false,\"id\":\"m1\"}]],\"yAxis\":{\"left\":{\"label\":\"Seconds\",\"min\":0}},\"liveData\":false}}]}"
      ]
     ]
    },
    "DashboardName": "obhdashboard"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhdashboard/Resource"
   }
  },
  "obhgunicornanamoly": {
   "Type": "AWS::Logs::LogAnomalyDetector",
   "Properties": {
    "AnomalyVisibilityTime": 7,
    "DetectorName": "obhgunicornanamoly",
    "EvaluationFrequency": "FIFTEEN_MIN",
    "FilterPattern": "Admin login not allowed",
    "LogGroupArnList": [
     "arn:aws:logs:us-east-1:127537946772:log-group:obh-gunicorn-error-logs:*"
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhgunicornanamoly"
   }
  },
  "obhgunicornanamolyalarm82F611DD": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "obhnotificationtopic29134B4A"
     }
    ],
    "AlarmName": "obhgunicornanamolyalarm",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "DatapointsToAlarm": 1,
    "EvaluationPeriods": 1,
    "Metrics": [
     {
      "Id": "m1",
      "Label": "Log Anomaly",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "LogAnomalyDetector",
          "Value": "obhgunicornanamoly"
         },
         {
          "Name": "LogAnomalyPriority",
          "Value": "HIGH"
         }
        ],
        "MetricName": "AnomalyCount",
        "Namespace": "AWS/Logs"
       },
       "Period": 300,
       "Stat": "Average"
      },
      "ReturnData": true
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Threshold": 1,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhgunicornanamolyalarm/Resource"
   }
  },
  "obhalphadiskusederrorsC9542910": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "obhnotificationtopic29134B4A"
     }
    ],
    "AlarmName": "obhalphadiskusederrors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "DatapointsToAlarm": 3,
    "EvaluationPeriods": 3,
    "Metrics": [
     {
      "Id": "m1",
      "Label": "Disk Used (%)",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "InstanceId",
          "Value": {
           "Fn::GetAtt": [
            "obhalpha",
            "InstanceId"
           ]
          }
         }
        ],
        "MetricName": "disk_used_percent",
        "Namespace": "obh"
       },
       "Period": 300,
       "Stat": "Average"
      },
      "ReturnData": true
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Threshold": 50,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhalphadiskusederrors/Resource"
   }
  },
  "obhalphamemusederrors9C43559F": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "obhnotificationtopic29134B4A"
     }
    ],
    "AlarmName": "obhalphamemusederrors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "DatapointsToAlarm": 3,
    "EvaluationPeriods": 3,
    "Metrics": [
     {
      "Id": "m1",
      "Label": "Memory Used (%)",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "InstanceId",
          "Value": {
           "Fn::GetAtt": [
            "obhalpha",
            "InstanceId"
           ]
          }
         }
        ],
        "MetricName": "mem_used_percent",
        "Namespace": "obh"
       },
       "Period": 300,
       "Stat": "Average"
      },
      "ReturnData": true
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Threshold": 50,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhalphamemusederrors/Resource"
   }
  },
  "obhalphacpuusageactiveerrors6162F188": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "obhnotificationtopic29134B4A"
     }
    ],
    "AlarmName": "obhalphacpuusageactiveerrors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "DatapointsToAlarm": 3,
    "EvaluationPeriods": 3,
    "Metrics": [
     {
      "Id": "m1",
      "Label": "CPU Used (%)",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "InstanceId",
          "Value": {
           "Fn::GetAtt": [
            "obhalpha",
            "InstanceId"
           ]
          }
         }
        ],
        "MetricName": "cpu_usage_active",
        "Namespace": "obh"
       },
       "Period": 300,
       "Stat": "Average"
      },
      "ReturnData": true
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Threshold": 50,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhalphacpuusageactiveerrors/Resource"
   }
  },
  "obhalphadownerrors54F23B51": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "obhnotificationtopic29134B4A"
     }
    ],
    "AlarmName": "obhalphadownerrors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "DatapointsToAlarm": 1,
    "EvaluationPeriods": 1,
    "Metrics": [
     {
      "Expression": "IF(FILL(m1,0) == 0, 1, 0)",
      "Id": "expr_1",
      "Label": "STOPPED"
     },
     {
      "Id": "m1",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "InstanceId",
          "Value": {
           "Fn::GetAtt": [
            "obhalpha",
            "InstanceId"
           ]
          }
         }
        ],
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/EC2"
       },
       "Period": 120,
       "Stat": "Maximum"
      },
      "ReturnData": false
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Threshold": 1,
    "TreatMissingData": "breaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhalphadownerrors/Resource"
   }
  },
  "obhnexusapptrialanomalydetectoralarm": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmName": "obhnexusapptrialanomalydetectoralarm",
    "ComparisonOperator": "GreaterThanUpperThreshold",
    "DatapointsToAlarm": 2,
    "EvaluationPeriods": 3,
    "Metrics": [
     {
      "Id": "m1",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "Annotation",
          "Value": "trial"
         }
        ],
        "MetricName": "usercount",
        "Namespace": "nexusapp_CustomMetrics"
       },
       "Period": 300,
       "Stat": "p90"
      },
      "ReturnData": true
     },
     {
      "Expression": "ANOMALY_DETECTION_BAND(m1, 2)",
      "Id": "expr_1",
      "Label": "Anomaly Detection Band",
      "ReturnData": true
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "ThresholdMetricId": "expr_1",
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusapptrialanomalydetectoralarm"
   }
  },
  "obhnexusappavailabilitysloalarmE9062A24": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "obhnotificationtopic29134B4A"
     }
    ],
    "AlarmName": "obhnexusappavailabilitysloalarm",
    "ComparisonOperator": "LessThanThreshold",
    "Dimensions": [
     {
      "Name": "SloName",
      "Value": "obhnexusappavailabilityslo"
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "AttainmentRate",
    "Namespace": "AWS/ApplicationSignals",
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Threshold": 99,
    "TreatMissingData": "breaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnexusappavailabilitysloalarm/Resource"
   }
  },
  "obhnobleapptrialanomalydetectoralarm": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmName": "obhnobleapptrialanomalydetectoralarm",
    "ComparisonOperator": "GreaterThanUpperThreshold",
    "DatapointsToAlarm": 2,
    "EvaluationPeriods": 3,
    "Metrics": [
     {
      "Id": "m1",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "Annotation",
          "Value": "trial"
         }
        ],
        "MetricName": "usercount",
        "Namespace": "nobleapp_CustomMetrics"
       },
       "Period": 300,
       "Stat": "p90"
      },
      "ReturnData": true
     },
     {
      "Expression": "ANOMALY_DETECTION_BAND(m1, 2)",
      "Id": "expr_1",
      "Label": "Anomaly Detection Band",
      "ReturnData": true
     }
    ],
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "ThresholdMetricId": "expr_1",
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleapptrialanomalydetectoralarm"
   }
  },
  "obhnobleappavailabilitysloalarm3A669CA1": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "obhnotificationtopic29134B4A"
     }
    ],
    "AlarmName": "obhnobleappavailabilitysloalarm",
    "ComparisonOperator": "LessThanThreshold",
    "Dimensions": [
     {
      "Name": "SloName",
      "Value": "obhnobleappavailabilityslo"
     }
    ],
    "EvaluationPeriods": 3,
    "MetricName": "AttainmentRate",
    "Namespace": "AWS/ApplicationSignals",
    "Period": 300,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Threshold": 99,
    "TreatMissingData": "breaching"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhnobleappavailabilitysloalarm/Resource"
   }
  },
  "obhcustommetrics31A52C7B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-127537946772-us-east-1",
     "S3Key": "46dbd8e397f52faff0bc8e30ce7c1d9d4e4cca194018097413dd3c9008857c56.zip"
    },
    "Environment": {
     "Variables": {
      "APPS": "nexusapp,nobleapp",
      "ENV": "demo",
      "REGION": "us-east-1",
      "NAMESPACE": "obh",
      "APP_NAME_TAG": "ObserveHack",
      "MODULE_NAME_TAG": "ObserveHack",
      "LOG_LEVEL": "20"
     }
    },
    "FunctionName": "obhcustommetrics",
    "Handler": "index.lambda_handler",
    "MemorySize": 128,
    "Role": {
     "Ref": "obhrolesstackcustommetricsParameter"
    },
    "Runtime": "python3.12",
    "Tags": [
     {
      "Key": "App",
      "Value": "ObserveHack"
     },
     {
      "Key": "Module",
      "Value": "ObserveHack"
     },
     {
      "Key": "Namespace",
      "Value": "obh"
     }
    ],
    "Timeout": 30,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "obhrolesstackcustommetricsssmPolicyobhObservabilityStackobhrolesstackcustommetricsssm6EB8081D4AC9291C"
   ],
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhcustommetrics/Resource",
    "aws:asset:path": "asset.46dbd8e397f52faff0bc8e30ce7c1d9d4e4cca194018097413dd3c9008857c56",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "obhcustommetricsEventInvokeConfig3F9E6F69": {
   "Type": "AWS::Lambda::EventInvokeConfig",
   "Properties": {
    "FunctionName": {
     "Ref": "obhcustommetrics31A52C7B"
    },
    "MaximumRetryAttempts": 0,
    "Qualifier": "$LATEST"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhcustommetrics/EventInvokeConfig/Resource"
   }
  },
  "obhcustommetricsruleDE9A0066": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Name": "obhcustommetrics",
    "ScheduleExpression": "cron(*/5 * * * ? *)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "obhcustommetrics31A52C7B",
        "Arn"
       ]
      },
      "Id": "Target0",
      "Input": "{\"Message\":\"Start\"}"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhcustommetricsrule/Resource"
   }
  },
  "obhcustommetricsruleAllowEventRuleobhObservabilityStackobhcustommetrics3B0A1EC84D2CCFD6": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "obhcustommetrics31A52C7B",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "obhcustommetricsruleDE9A0066",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/obhcustommetricsrule/AllowEventRuleobhObservabilityStackobhcustommetrics3B0A1EC8"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/21T227bMAz9lr4r2tJi6LObbEOxDDOSYa8BIzOOGkk0dElgGP73UXJzWbEnHlI0pXMO/Sjnz8/y8wOcw0w1x5nROzlsIqijWGOg5BWKxd7V4MFiRC+4cTtosHKoyWjVl9MJrcmU5kt8dSGCU1h72muDozjaIIcfWL7JoTIaQk4KGEVwfP6bOq1ycQKbtAvK6y5qcrl6n49CUet0JDnk6xp0Uce+JjLiQ56fVEWmdbBc5Jue5PCS1BFj7nxHU7jR+iefkhcImL/eDg12hvo8TU5Hy2tBQAgYg6xyGIUBu2ugPHEFPfo/6EMms9GuNRjJfUtOFXpXwK1X/PXEI1/diY64ILfXbT79b7FGb3UIRRifrMzCdt1Pygp5EYLNznq+9ebmvbWjQPXILaiSZ9m+e0pdUfxj4eIrC9G7eMCoFfu2AAe+6DahUUDXsXSQWQTdOjBBlnH+pBWu8ITm1+4NmeUJhTKUmjNEdZDDEsJhR+CbPOyWVAa8nbaFAetKbRm4orZyZMH0S6ahMlfM8vCb1ul9IzmOFye2Jruw5UVWRsvqHBZGF2NEMYyXv2WNxCKFSPb+J7jgUdR9PJD79CTnc/nl4S1oPfOJl82iXE/xL8r4B69YAwAA"
   },
   "Metadata": {
    "aws:cdk:path": "obh-ObservabilityStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ExportsOutputRefAWSStackIdB2DD5BAA": {
   "Value": {
    "Ref": "AWS::StackId"
   },
   "Export": {
    "Name": "obh-ObservabilityStack:ExportsOutputRefAWSStackIdB2DD5BAA"
   }
  },
  "ExportsOutputFnGetAttobhalphaInstanceIdE90E6C06": {
   "Value": {
    "Fn::GetAtt": [
     "obhalpha",
     "InstanceId"
    ]
   },
   "Export": {
    "Name": "obh-ObservabilityStack:ExportsOutputFnGetAttobhalphaInstanceIdE90E6C06"
   }
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}